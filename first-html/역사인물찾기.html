<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—­ì‚¬ ì† ì¸ë¬¼ ì°¾ê¸° AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Gowun Batang', serif;
            background: linear-gradient(135deg, #e8dcc4 0%, #d4c5a9 100%);
            background-attachment: fixed;
            position: relative;
        }
        /* ì¢…ì´ ì§ˆê° ë ˆì´ì–´ - ê°•í™” */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="1.2" numOctaves="6" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.35"/></svg>'),
                url('https://www.transparenttextures.com/patterns/old-paper.png');
            background-blend-mode: multiply;
            opacity: 0.8;
            pointer-events: none;
            z-index: 0;
        }
        .card {
            position: relative;
            background: linear-gradient(to bottom, #faf7f0 0%, #f5f0e5 100%);
            border: 3px solid #b8a788;
            box-shadow: 
                0 4px 6px rgba(0,0,0,0.1),
                0 8px 20px rgba(139, 69, 19, 0.15);
        }
        /* ì¹´ë“œ ì¢…ì´ ì§ˆê° ê°•í™” */
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: inherit;
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><filter id="cardnoise"><feTurbulence type="fractalNoise" baseFrequency="1.5" numOctaves="5" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23cardnoise)" opacity="0.25"/></svg>');
            opacity: 0.6;
            pointer-events: none;
        }
        .btn-primary {
            background: linear-gradient(to bottom, #8b4513 0%, #6a360f 100%);
            color: #fdf6e3;
            border: 2px solid #5a2a0a;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            min-height: 48px; /* ëª¨ë°”ì¼ í„°ì¹˜ ì˜ì—­ í™•ë³´ */
        }
        .btn-primary:hover {
            background: linear-gradient(to bottom, #6a360f 0%, #5a2a0a 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .btn-primary:active {
            transform: translateY(1px);
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        .btn-answer {
            background: linear-gradient(to bottom, #faf7f0 0%, #f5f0e5 100%);
            border: 2px solid #c4b5a0;
            color: #4a3728;
            text-align: left;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            min-height: 52px; /* ëª¨ë°”ì¼ í„°ì¹˜ ì˜ì—­ ì¶©ë¶„íˆ í™•ë³´ */
            transition: all 0.2s ease;
        }
        .btn-answer:hover {
            background: linear-gradient(to bottom, #f5f0e5 0%, #ebe5d8 100%);
            border-color: #8b4513;
            box-shadow: 0 3px 8px rgba(139, 69, 19, 0.2);
            transform: translateY(-1px);
        }
        .btn-answer:active {
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .btn-secondary {
            background: linear-gradient(to bottom, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%);
            border: 2px solid #8b4513;
            color: #6a360f;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-height: 44px;
            font-weight: 600;
        }
        .btn-secondary:hover {
            background: linear-gradient(to bottom, rgba(139, 69, 19, 0.1) 0%, rgba(139, 69, 19, 0.15) 100%);
            border-color: #6a360f;
            box-shadow: 0 3px 6px rgba(0,0,0,0.15);
        }
        /* ê²°ê³¼ ì¹´ë“œ ìŠ¤íƒ€ì¼ ê°•í™” */
        .result-card {
            background: linear-gradient(to bottom, #fdfbf7 0%, #f8f4ed 100%);
            border: 3px solid #b8a788;
            box-shadow: 
                0 4px 8px rgba(0,0,0,0.12),
                0 6px 15px rgba(139, 69, 19, 0.1);
            position: relative;
        }
        /* ê²°ê³¼ ì¹´ë“œ ì¢…ì´ ì§ˆê° */
        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: inherit;
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><filter id="resultnoise"><feTurbulence type="fractalNoise" baseFrequency="1.5" numOctaves="5" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23resultnoise)" opacity="0.25"/></svg>');
            opacity: 0.6;
            pointer-events: none;
        }

        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 768px) {
            .btn-answer {
                padding: 1rem;
                line-height: 1.4;
            }
        }
    </style>
</head>
<body class="text-stone-800 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl mx-auto card rounded-lg shadow-xl p-6 md:p-8 transition-all duration-500">
        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="start-container" class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-stone-900 mb-4" style="letter-spacing: -1px;">ì—­ì‚¬ ì†, ë‹¹ì‹ ì˜ ëª¨ìŠµì€?</h1>
            <p class="text-stone-700 mb-8 text-base md:text-lg">ë‹¤ì„¯ ê°€ì§€ ì§ˆë¬¸ì„ í†µí•´, ë‹¹ì‹ ê³¼ ë‹®ì€ ì—­ì‚¬ ì† ì¸ë¬¼ì„ ì°¾ì•„ë³´ì„¸ìš”.</p>
            <button onclick="startQuiz()" class="btn-answer font-bold py-3 px-6 text-base md:text-lg rounded-md transition-transform transform hover:scale-105" style="text-align: center;">
                ì‹œì‘í•˜ê¸°
            </button>
        </div>

        <!-- í€´ì¦ˆ í™”ë©´ -->
        <div id="quiz-container" class="hidden">
            <div class="mb-6">
                <p id="progress-text" class="text-sm font-semibold text-stone-600 text-center"></p>
                <div class="w-full bg-stone-200 rounded-full h-2 mt-1">
                    <div id="progress-bar" class="bg-stone-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
            <h2 id="question-text" class="text-xl md:text-2xl font-bold text-stone-900 mb-6 text-center leading-relaxed"></h2>
            <div id="answers-container" class="grid grid-cols-1 gap-3"></div>
        </div>
        
        <!-- ë¡œë”© í™”ë©´ -->
        <div id="loading-container" class="hidden text-center p-8">
             <h2 class="text-xl md:text-2xl font-bold text-stone-900 mb-4">ì—­ì‚¬ì˜ ê¸°ë¡ì„ ë¶„ì„í•˜ëŠ” ì¤‘...</h2>
             <p class="text-stone-700 mb-6">AIê°€ ë‹¹ì‹ ì˜ ë‹µë³€ì„ í†µí•´ ì‹œëŒ€ì˜ ì •ì‹ ê³¼ ë‹¹ì‹ ì˜ ì˜í˜¼ì„ ì—°ê²°í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
             <div class="flex justify-center items-center">
                <svg class="animate-spin h-8 w-8 text-stone-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
             </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="result-container" class="hidden text-center">
            <h2 class="text-2xl md:text-3xl font-bold text-stone-900 mb-4">AIì˜ ë¶„ì„ ê²°ê³¼</h2>
            
            <!-- ê°„ë‹¨ ìš”ì•½ ê²°ê³¼ -->
            <div id="simple-result" class="fade-in">
                <p id="result-summary" class="text-stone-700 text-base md:text-lg mb-8 px-2 md:px-4"></p>
                 <div class="mb-8">
                    <p class="text-stone-600 text-sm">ë‹¹ì‹ ê³¼ ë‹®ì€ ì¸ë¬¼ë“¤ì€...</p>
                    <p class="text-xl md:text-2xl font-bold text-amber-900 mt-2">
                        <span id="korean-figure-name-simple"></span> & <span id="world-figure-name-simple"></span>
                    </p>
                </div>
                <button id="show-details-btn" class="btn-secondary font-bold py-2 px-6 rounded-md text-base transition-transform transform hover:scale-105">
                    ìì„¸íˆ ë³´ê¸°
                </button>
            </div>

            <!-- ìƒì„¸ ë¶„ì„ ê²°ê³¼ (ìˆ¨ê¹€) -->
            <div id="detailed-result" class="hidden mt-8 text-left">
                <p id="result-analysis" class="text-stone-700 mb-8 border-t border-b border-stone-300 py-4 leading-relaxed"></p>
                <div class="grid md:grid-cols-2 gap-6 mb-4">
                    <div class="result-card p-4 md:p-6 rounded-md">
                        <h3 class="text-lg md:text-xl font-bold text-stone-900 mb-2">ğŸ‡°ğŸ‡· í•œêµ­ì˜ ì¸ë¬¼</h3>
                        <p id="korean-figure-name" class="text-base md:text-lg font-semibold text-amber-900 mb-3"></p>
                        <p id="korean-figure-reason" class="text-stone-700 text-sm leading-relaxed"></p>
                    </div>
                    <div class="result-card p-4 md:p-6 rounded-md">
                        <h3 class="text-lg md:text-xl font-bold text-stone-900 mb-2">ğŸŒ ì„¸ê³„ì˜ ì¸ë¬¼</h3>
                        <p id="world-figure-name" class="text-base md:text-lg font-semibold text-amber-900 mb-3"></p>
                        <p id="world-figure-reason" class="text-stone-700 text-sm leading-relaxed"></p>
                    </div>
                </div>
            </div>

            <button onclick="resetQuiz()" class="btn-answer font-bold py-3 px-6 text-base md:text-lg rounded-md transition-transform transform hover:scale-105 mt-8" style="text-align: center;">
                ì²˜ìŒìœ¼ë¡œ
            </button>
        </div>
    </div>

<script>
    // --- ë°ì´í„° ì˜ì—­ ---
    const questions = [
        { question: "ë‹¹ì‹  ì•ì— ê±°ëŒ€í•œ ìœ„ê¸°ê°€ ë‹¥ì³¤ìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ëŒ€ì²˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", answers: ["ë‚˜ì˜ ì‹ ë…ê³¼ ì›ì¹™ì„ êµ³ê²Œ ì§€í‚¤ë©°, ì •ë©´ìœ¼ë¡œ ëŒíŒŒí•œë‹¤.", "í•œ ê±¸ìŒ ë¬¼ëŸ¬ë‚˜ ìƒí™©ì„ ë©´ë°€íˆ ë¶„ì„í•˜ê³ , ê°€ì¥ í•©ë¦¬ì ì¸ í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤.", "ì‹ ë¢°í•˜ëŠ” ë™ë£Œë“¤ì„ ëª¨ì•„ ì˜ê²¬ì„ êµ¬í•˜ê³ , í•¨ê»˜ í˜ì„ í•©ì³ ìœ„ê¸°ë¥¼ ê·¹ë³µí•œë‹¤.", "ì´ ìœ„ê¸°ê°€ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ë¯¸ì¹  ê³ í†µì„ ë¨¼ì € ìƒê°í•˜ê³ , ê·¸ë“¤ì„ ë³´í˜¸í•  ë°©ë²•ì„ ì°¾ëŠ”ë‹¤."] },
        { question: "ë‹¹ì‹ ì´ ì„¸ìƒì— ë‹¨ í•˜ë‚˜ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤ë©´, ë¬´ì—‡ì„ ë‚¨ê¸°ì‹œê² ìŠµë‹ˆê¹Œ?", answers: ["ëª¨ë‘ê°€ ë”°ë¥¼ ìˆ˜ ìˆëŠ” ìœ„ëŒ€í•œ ì‚¬ìƒì´ë‚˜ ë²•ì „.", "ì‚¬ëŒë“¤ì˜ ì‚¶ì„ í’ìš”ë¡­ê²Œ í•  íšê¸°ì ì¸ ë°œëª…í’ˆì´ë‚˜ ì˜ˆìˆ  ì‘í’ˆ.", "ë¯¸ë˜ ì„¸ëŒ€ê°€ ë” ë‚˜ì€ ì„¸ìƒì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì§€ì‹ê³¼ ì§€í˜œ.", "ì˜¤ë«ë™ì•ˆ ê¸°ì–µë  ì‚¬ë‘ê³¼ í—Œì‹ ì˜ ì´ì•¼ê¸°."] },
        { question: "ë‹¹ì‹ ì€ ì–´ë–¤ ë°©ì‹ì˜ ì§€ë„ì(ë¦¬ë”)ì— ê°€ê¹ìŠµë‹ˆê¹Œ?", answers: ["ê°•ë ¥í•œ ì¹´ë¦¬ìŠ¤ë§ˆì™€ ë¹„ì „ìœ¼ë¡œ ëª¨ë‘ë¥¼ ì´ë„ëŠ” ì„ êµ¬ì.", "ê°ìì˜ ì¬ëŠ¥ì„ ì¡´ì¤‘í•˜ê³ , ë’¤ì—ì„œ ë¬µë¬µíˆ ì§€ì›í•˜ëŠ” ì¡°ë ¥ì.", "ëª…í™•í•œ ëª©í‘œì™€ ë…¼ë¦¬ì ì¸ ì „ëµìœ¼ë¡œ ì¡°ì§ì„ ìš´ì˜í•˜ëŠ” ê´€ë¦¬ì.", "ëª¨ë“  êµ¬ì„±ì›ì˜ ëª©ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ê³ , ë”°ëœ»í•˜ê²Œ í¬ìš©í•˜ëŠ” í†µí•©ê°€."] },
        { question: "ëª…ë°±íˆ ë¶ˆê³µì •í•œ ìƒí™©ì„ ëª©ê²©í–ˆì„ ë•Œ, ë‹¹ì‹ ì€ ì–´ë–»ê²Œ í–‰ë™í•©ë‹ˆê¹Œ?", answers: ["ë¶ˆì˜ì— ë¶„ë…¸í•˜ë©°, í¬ìƒì„ ê°ìˆ˜í•˜ë”ë¼ë„ ì¦‰ì‹œ ë°”ë¡œì¡ê¸° ìœ„í•´ ë‚˜ì„ ë‹¤.", "ìƒí™©ì„ ë°”ê¿€ ìˆ˜ ìˆëŠ” ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•ì„ ì°¾ê¸° ìœ„í•´ ì¡°ìš©íˆ í˜ì„ ê¸°ë¥¸ë‹¤.", "ëœ»ì„ ê°™ì´í•˜ëŠ” ì‚¬ëŒë“¤ì„ ëª¨ì•„ ì—¬ë¡ ì„ í˜•ì„±í•˜ê³ , ì ì§„ì ì¸ ë³€í™”ë¥¼ ê¾€í•œë‹¤.", "ìƒì²˜ë°›ì€ ì‚¬ëŒë“¤ì„ ìœ„ë¡œí•˜ê³ , ê·¸ë“¤ì˜ í¸ì— ì„œì„œ í•¨ê»˜ ì•„íŒŒí•œë‹¤."] },
        { question: "í›—ë‚ , ì‚¬ëŒë“¤ì´ ë‹¹ì‹ ì„ ì–´ë–»ê²Œ ê¸°ì–µí•˜ê¸¸ ë°”ë¼ì‹­ë‹ˆê¹Œ?", answers: ["ì‹œëŒ€ë¥¼ ë°”ê¾¼ ìœ„ëŒ€í•œ í˜ëª…ê°€.", "ì¸ë¥˜ì—ê²Œ ìƒˆë¡œìš´ ì˜ê°ì„ ì¤€ ì²œì¬ì ì¸ ì°½ì¡°ì.", "ì§€í˜œì˜ ë“±ë¶ˆë¡œ ì–´ë‘ ì„ ë°íŒ í˜„ì.", "ì„¸ìƒì„ ë” ë”°ëœ»í•˜ê²Œ ë§Œë“  ì´íƒ€ì ì¸ ì˜ì›…."] }
    ];

    // --- ìƒíƒœ ë³€ìˆ˜ ë° DOM ì°¸ì¡° ---
    let currentQuestionIndex = 0, userAnswers = [];
    const startContainer = document.getElementById('start-container'), quizContainer = document.getElementById('quiz-container'), loadingContainer = document.getElementById('loading-container'), resultContainer = document.getElementById('result-container'), questionText = document.getElementById('question-text'), answersContainer = document.getElementById('answers-container'), progressBar = document.getElementById('progress-bar'), progressText = document.getElementById('progress-text'), showDetailsBtn = document.getElementById('show-details-btn'), detailedResult = document.getElementById('detailed-result');

    // --- í•¨ìˆ˜ ---
    function startQuiz() {
        startContainer.classList.add('hidden');
        quizContainer.classList.remove('hidden');
        detailedResult.classList.add('hidden');
        document.getElementById('simple-result').classList.remove('hidden');
        showDetailsBtn.textContent = 'ìì„¸íˆ ë³´ê¸°';
        currentQuestionIndex = 0; userAnswers = [];
        showQuestion();
    }

    function showQuestion() {
        answersContainer.classList.add('opacity-0');
        setTimeout(() => {
            const q = questions[currentQuestionIndex];
            questionText.textContent = q.question;
            answersContainer.innerHTML = '';
            q.answers.forEach(text => {
                const btn = document.createElement('button');
                btn.textContent = text;
                btn.className = "w-full p-3 md:p-4 btn-answer rounded-md transition-all duration-200 text-sm md:text-base";
                btn.onclick = () => selectAnswer(text);
                answersContainer.appendChild(btn);
            });
            updateProgress();
            answersContainer.classList.remove('opacity-0');
        }, 200);
    }
    
    function updateProgress() {
        const percent = ((currentQuestionIndex) / questions.length) * 100;
        progressBar.style.width = `${percent}%`;
        progressText.textContent = `ì§ˆë¬¸ ${currentQuestionIndex + 1} / ${questions.length}`;
    }

    function selectAnswer(answerText) {
        userAnswers.push({ question: questions[currentQuestionIndex].question, answer: answerText });
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) showQuestion();
        else {
            progressBar.style.width = '100%';
            progressText.textContent = `ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ`;
            setTimeout(requestAiAnalysis, 500);
        }
    }

    function requestAiAnalysis() {
        quizContainer.classList.add('hidden');
        loadingContainer.classList.remove('hidden');
        getAiAnalysis();
    }
    
    async function getAiAnalysis() {
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        const systemPrompt = `ë‹¹ì‹ ì€ ì‚¬ìš©ìì˜ ì‹¬ë¦¬ë¥¼ ê¿°ëš«ì–´ ë³´ëŠ” ì—­ì‚¬í•™ìì´ì í”„ë¡œíŒŒì¼ëŸ¬ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ë‹µë³€ì„ ë°”íƒ•ìœ¼ë¡œ í•µì‹¬ ê°€ì¹˜ê´€, ë¦¬ë”ì‹­ ìŠ¤íƒ€ì¼, ì—´ë§ì„ ë¶„ì„í•©ë‹ˆë‹¤. ë¶„ì„ ë‚´ìš©ì„ í† ëŒ€ë¡œ, ì‚¬ìš©ìì™€ ê°€ì¥ ë‹®ì€ ì—­ì‚¬ì  ì¸ë¬¼ì„ í•œêµ­ê³¼ ì„¸ê³„ì—ì„œ ê°ê° í•œ ëª…ì”© ì¶”ì²œí•´ì•¼ í•©ë‹ˆë‹¤. ë¶„ì„ ë‚´ìš©ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½í•œ 'analysis_summary'ì™€ ìƒì„¸ ë¶„ì„ ë‚´ìš©ì¸ 'analysis_detail'ì„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹µë³€ì€ ë°˜ë“œì‹œ ì•„ë˜ì˜ JSON í˜•ì‹ì— ë§ì¶° í•œêµ­ì–´ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.`;
        
        const userQuery = `ë‹¤ìŒì€ ì œê°€ 5ê°œì˜ ì§ˆë¬¸ì— ë‹µí•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì €ì˜ ì„±í–¥ì„ ë¶„ì„í•˜ê³ , ê°€ì¥ ë‹®ì€ í•œêµ­ ë° ì„¸ê³„ ì—­ì‚¬ ì¸ë¬¼ì„ ì¶”ì²œí•´ì£¼ì„¸ìš”.\n\n` + userAnswers.map((item, i) => `${i + 1}. ì§ˆë¬¸: ${item.question}\n   ë‹µë³€: ${item.answer}`).join('\n\n');

        const payload = {
            contents: [{ parts: [{ text: userQuery }] }],
            systemInstruction: { parts: [{ text: systemPrompt }] },
            generationConfig: {
                responseMimeType: "application/json",
                responseSchema: {
                    type: "OBJECT",
                    properties: {
                        analysis_summary: { type: "STRING" },
                        analysis_detail: { type: "STRING" },
                        korean_figure: { type: "OBJECT", properties: { name: { type: "STRING" }, reason: { type: "STRING" } } },
                        world_figure: { type: "OBJECT", properties: { name: { type: "STRING" }, reason: { type: "STRING" } } }
                    }
                }
            }
        };

        try {
            const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            if (!response.ok) throw new Error(`API ìš”ì²­ ì‹¤íŒ¨: ${response.status}`);
            const result = await response.json();
            const jsonText = result.candidates[0].content.parts[0].text;
            showResults(JSON.parse(jsonText));
        } catch (error) {
            console.error("API í˜¸ì¶œ ì˜¤ë¥˜:", error);
            loadingContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');
            document.getElementById('simple-result').innerHTML = '<p class="text-red-500">AI ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
        }
    }

    function showResults(data) {
        loadingContainer.classList.add('hidden');
        resultContainer.classList.remove('hidden');
        
        // ê°„ë‹¨ ìš”ì•½ ì •ë³´ ì±„ìš°ê¸°
        document.getElementById('result-summary').textContent = data.analysis_summary;
        document.getElementById('korean-figure-name-simple').textContent = data.korean_figure.name;
        document.getElementById('world-figure-name-simple').textContent = data.world_figure.name;
        
        // ìƒì„¸ ì •ë³´ ì±„ìš°ê¸°
        document.getElementById('result-analysis').textContent = data.analysis_detail;
        document.getElementById('korean-figure-name').textContent = data.korean_figure.name;
        document.getElementById('korean-figure-reason').textContent = data.korean_figure.reason;
        document.getElementById('world-figure-name').textContent = data.world_figure.name;
        document.getElementById('world-figure-reason').textContent = data.world_figure.reason;
    }
    
    showDetailsBtn.addEventListener('click', () => {
        const isHidden = detailedResult.classList.contains('hidden');
        detailedResult.classList.toggle('hidden');
        showDetailsBtn.textContent = isHidden ? 'ìˆ¨ê¸°ê¸°' : 'ìì„¸íˆ ë³´ê¸°';
    });

    function resetQuiz() {
        resultContainer.classList.add('hidden');
        startContainer.classList.remove('hidden');
    }
</script>

</body>
</html>

