<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì²­ì†Œêµ¬ì—­ ë°°ì • í”„ë¡œê·¸ë¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Inter í°íŠ¸ì™€ Tailwind CSS ê¸°ë³¸ ì„¤ì •ì„ ì ìš©í•©ë‹ˆë‹¤. */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* í™œì„± íƒ­ê³¼ ë¹„í™œì„± íƒ­ì˜ ì‹œê°ì  êµ¬ë¶„ì„ ëª…í™•í•˜ê²Œ í•©ë‹ˆë‹¤. */
        .nav-link.active {
            border-bottom-color: #3b82f6; /* blue-500 */
            color: #3b82f6;
        }
        /* í˜ì´ì§€ ì „í™˜ ì‹œ ë¶€ë“œëŸ¬ìš´ íš¨ê³¼ë¥¼ ì¤ë‹ˆë‹¤. */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-start justify-center min-h-screen p-4">

<div class="w-full max-w-2xl bg-white rounded-xl shadow-lg overflow-hidden">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ íƒ­ -->
    <nav class="flex bg-gray-50 border-b border-gray-200">
        <a id="nav-assign" class="nav-link flex-1 py-4 px-2 text-center font-semibold text-gray-600 cursor-pointer border-b-4 border-transparent transition-colors duration-300 active">
            ì²­ì†Œêµ¬ì—­ ë°°ì •
        </a>
        <a id="nav-settings" class="nav-link flex-1 py-4 px-2 text-center font-semibold text-gray-600 cursor-pointer border-b-4 border-transparent transition-colors duration-300">
            ì„¤ì •
        </a>
    </nav>

    <!-- í˜ì´ì§€ 1: ì²­ì†Œêµ¬ì—­ ë°°ì • -->
    <div id="page-assign" class="page p-6 md:p-8 active">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">ì²­ì†Œêµ¬ì—­ ë°°ì •</h2>
            <button id="random-assign-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105">
                ğŸ² ëœë¤ ë°°ì •
            </button>
        </div>
        <div id="assignment-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë™ì  ìƒì„± -->
        </div>
    </div>

    <!-- í˜ì´ì§€ 2: ì„¤ì • -->
    <div id="page-settings" class="page p-6 md:p-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">ì„¤ì •</h2>
        <div class="space-y-6">
            <div>
                <label for="student-count" class="block text-sm font-medium text-gray-700 mb-1">ë²ˆí˜¸ ë²”ìœ„ (ì´ í•™ìƒ ìˆ˜)</label>
                <input type="number" id="student-count" min="1" placeholder="ì˜ˆ: 30" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            </div>
            <div>
                <label for="cleaning-areas" class="block text-sm font-medium text-gray-700 mb-1">ì²­ì†Œêµ¬ì—­ ëª©ë¡ (í•œ ì¤„ì— í•˜ë‚˜ì”© ì…ë ¥)</label>
                <textarea id="cleaning-areas" rows="8" placeholder="ì˜ˆ:&#10;êµì‹¤ ì• ë³µë„&#10;êµì‹¤ ë’¤ ë³µë„&#10;ê³„ë‹¨&#10;ë¶„ë¦¬ìˆ˜ê±°" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm resize-y"></textarea>
            </div>
        </div>
        <div class="mt-8 flex justify-end items-center">
             <span id="save-feedback" class="text-green-600 font-semibold mr-4"></span>
            <button id="save-settings-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-5 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105">
                ğŸ’¾ ì €ì¥
            </button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const navAssign = document.getElementById('nav-assign');
    const navSettings = document.getElementById('nav-settings');
    const pageAssign = document.getElementById('page-assign');
    const pageSettings = document.getElementById('page-settings');
    
    const studentCountInput = document.getElementById('student-count');
    const cleaningAreasInput = document.getElementById('cleaning-areas');
    const saveSettingsBtn = document.getElementById('save-settings-btn');
    const saveFeedback = document.getElementById('save-feedback');
    
    const assignmentContainer = document.getElementById('assignment-container');
    const randomAssignBtn = document.getElementById('random-assign-btn');

    // ê¸°ë³¸ ì„¤ì •ê°’
    const DEFAULT_STUDENT_COUNT = 30;
    const DEFAULT_AREAS = ['êµì‹¤ ì• ì“¸ê¸°1','êµì‹¤ ì• ì“¸ê¸°2', 'êµì‹¤ ë’¤ ì“¸ê¸°1','êµì‹¤ ë’¤ ì“¸ê¸°2', '1ë¶„ë‹¨ ì“¸ê¸°1', '1ë¶„ë‹¨ ì“¸ê¸°2', '2ë¶„ë‹¨ ì“¸ê¸°1', '2ë¶„ë‹¨ ì“¸ê¸°2', '3ë¶„ë‹¨ ì“¸ê¸°1', '3ë¶„ë‹¨ ì“¸ê¸°2', '1ë¶„ë‹¨ ì±…ìƒ ì¤„ ë§ì¶”ê¸°1', '1ë¶„ë‹¨ ì±…ìƒ ì¤„ ë§ì¶”ê¸°2', '2ë¶„ë‹¨ ì±…ìƒ ì¤„ ë§ì¶”ê¸°1', '2ë¶„ë‹¨ ì±…ìƒ ì¤„ ë§ì¶”ê¸°2', '3ë¶„ë‹¨ ì±…ìƒ ì¤„ ë§ì¶”ê¸°1', '3ë¶„ë‹¨ ì±…ìƒ ì¤„ ë§ì¶”ê¸°2', 'ë³µë„ ì“¸ê¸°1', 'ë³µë„ ì“¸ê¸°2' , 'ì¶œì„ë¶€ ê´€ë¦¬ì', 'ì „ì„  ê´€ë¦¬ì', 'í•¸ë“œí° ê´€ë¦¬ì1', 'í•¸ë“œí° ê´€ë¦¬ì2' , 'ê²Œì‹œíŒ ê´€ë¦¬ì', 'ì¹ íŒ ê´€ë¦¬ì', 'ì—ë„ˆì§€ ì§€í‚´ì´', 'ê³µê¸° ì§€í‚´ì´', 'í™˜ê²½ ì§€í‚´ì´'];

    // í˜ì´ì§€ ì „í™˜ ë¡œì§
    function showPage(pageToShow) {
        // ëª¨ë“  í˜ì´ì§€ì™€ ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ì—ì„œ 'active' í´ë˜ìŠ¤ ì œê±°
        [pageAssign, pageSettings].forEach(p => p.classList.remove('active'));
        [navAssign, navSettings].forEach(n => n.classList.remove('active'));

        // ì„ íƒëœ í˜ì´ì§€ì™€ ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ì— 'active' í´ë˜ìŠ¤ ì¶”ê°€
        if (pageToShow === 'assign') {
            pageAssign.classList.add('active');
            navAssign.classList.add('active');
            loadAssignments(); // ë°°ì • í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤„ ë•Œë§ˆë‹¤ ëª©ë¡ ê°±ì‹ 
        } else {
            pageSettings.classList.add('active');
            navSettings.classList.add('active');
        }
    }

    navAssign.addEventListener('click', () => showPage('assign'));
    navSettings.addEventListener('click', () => showPage('settings'));

    // ì„¤ì • ì €ì¥ ë¡œì§
    saveSettingsBtn.addEventListener('click', () => {
        const studentCount = studentCountInput.value;
        // ê³µë°±, ë¹ˆ ì¤„ì„ ì œê±°í•˜ê³  ìœ íš¨í•œ êµ¬ì—­ë§Œ ì €ì¥
        const cleaningAreas = cleaningAreasInput.value.split('\n').map(s => s.trim()).filter(Boolean); 
        
        localStorage.setItem('studentCount', studentCount);
        localStorage.setItem('cleaningAreas', JSON.stringify(cleaningAreas));

        // ì €ì¥ ì™„ë£Œ í”¼ë“œë°±
        saveFeedback.textContent = 'ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!';
        setTimeout(() => saveFeedback.textContent = '', 2000); // 2ì´ˆ í›„ ë©”ì‹œì§€ ì‚¬ë¼ì§
    });

    // ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° ë¡œì§
    function loadSettings() {
        const savedCount = localStorage.getItem('studentCount');
        const savedAreas = localStorage.getItem('cleaningAreas');

        studentCountInput.value = savedCount || DEFAULT_STUDENT_COUNT;
        cleaningAreasInput.value = savedAreas ? JSON.parse(savedAreas).join('\n') : DEFAULT_AREAS.join('\n');
    }
    
    // ë°°ì •íŒ ë¶ˆëŸ¬ì˜¤ê¸° ë¡œì§
    function loadAssignments() {
        assignmentContainer.innerHTML = ''; // ê¸°ì¡´ ëª©ë¡ ì´ˆê¸°í™”
        const areas = JSON.parse(localStorage.getItem('cleaningAreas') || JSON.stringify(DEFAULT_AREAS));
        
        if (areas.length === 0) {
            assignmentContainer.innerHTML = '<p class="text-gray-500 col-span-full text-center">ì„¤ì • í˜ì´ì§€ì—ì„œ ì²­ì†Œêµ¬ì—­ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>';
            return;
        }

        areas.forEach(area => {
            const itemHTML = `
                <div class="bg-gray-50 p-4 rounded-lg flex justify-between items-center border border-gray-200">
                    <span class="font-medium text-gray-700">${area}</span>
                    <input type="number" min="1" class="w-20 p-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:outline-none">
                </div>
            `;
            assignmentContainer.insertAdjacentHTML('beforeend', itemHTML);
        });
    }

    // ëœë¤ ë°°ì • ë¡œì§
    randomAssignBtn.addEventListener('click', () => {
        const studentCount = parseInt(localStorage.getItem('studentCount') || DEFAULT_STUDENT_COUNT, 10);
        const areas = JSON.parse(localStorage.getItem('cleaningAreas') || JSON.stringify(DEFAULT_AREAS));
        const inputs = assignmentContainer.querySelectorAll('input');

        if (areas.length === 0) {
            alert('ë¨¼ì € ì„¤ì • í˜ì´ì§€ì—ì„œ ì²­ì†Œêµ¬ì—­ì„ ì§€ì •í•´ì£¼ì„¸ìš”.');
            return;
        }
        
        if (studentCount < areas.length) {
            alert(`í•™ìƒ ìˆ˜(${studentCount}ëª…)ê°€ ì²­ì†Œêµ¬ì—­ ê°œìˆ˜(${areas.length}ê°œ)ë³´ë‹¤ ì ì–´ ëª¨ë‘ ë°°ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.`);
            return;
        }

        // 1ë¶€í„° í•™ìƒ ìˆ˜ê¹Œì§€ì˜ ìˆ«ì ë°°ì—´ ìƒì„±
        const numbers = Array.from({ length: studentCount }, (_, i) => i + 1);

        // ìˆ«ì ë°°ì—´ì„ ë¬´ì‘ìœ„ë¡œ ì„ìŒ (Fisher-Yates Shuffle ì•Œê³ ë¦¬ì¦˜)
        for (let i = numbers.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [numbers[i], numbers[j]] = [numbers[j], numbers[i]];
        }
        
        // ì„ì¸ ë²ˆí˜¸ë¥¼ ìˆœì„œëŒ€ë¡œ inputì— í• ë‹¹
        inputs.forEach((input, index) => {
            if(index < numbers.length) {
                input.value = numbers[index];
            }
        });
    });

    // ì´ˆê¸°í™” í•¨ìˆ˜ ì‹¤í–‰
    loadSettings();
    showPage('assign'); // ì²« í™”ë©´ì€ ë°°ì • í˜ì´ì§€ë¡œ
});
</script>

</body>
</html>



